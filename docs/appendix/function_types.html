
<!DOCTYPE HTML>
<html lang="ja" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>関数の型 · An Introduction to Elm</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Evan Czaplicki">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    <meta name="robots" content="noindex">
    
    
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../about_translation.html" />
    
    
    <link rel="prev" href="types_as_bits.html" />
    


    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="検索すると入力" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    はじめに
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../install.html">
            
                <a href="../install.html">
            
                    
                    インストール
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../core_language.html">
            
                <a href="../core_language.html">
            
                    
                    言語の基礎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../architecture/">
            
                <a href="../architecture/">
            
                    
                    The Elm Architecture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../architecture/buttons.html">
            
                <a href="../architecture/buttons.html">
            
                    
                    ボタン
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../architecture/text_fields.html">
            
                <a href="../architecture/text_fields.html">
            
                    
                    テキスト入力
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../architecture/forms.html">
            
                <a href="../architecture/forms.html">
            
                    
                    フォーム
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../types/">
            
                <a href="../types/">
            
                    
                    型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../types/reading_types.html">
            
                <a href="../types/reading_types.html">
            
                    
                    型を読む
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../types/type_aliases.html">
            
                <a href="../types/type_aliases.html">
            
                    
                    型の別名
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../types/custom_types.html">
            
                <a href="../types/custom_types.html">
            
                    
                    カスタム型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../types/pattern_matching.html">
            
                <a href="../types/pattern_matching.html">
            
                    
                    パターンマッチ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../effects/">
            
                <a href="../effects/">
            
                    
                    コマンドとサブスクリプション
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../effects/random.html">
            
                <a href="../effects/random.html">
            
                    
                    Random
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../effects/time.html">
            
                <a href="../effects/time.html">
            
                    
                    Time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../effects/json.html">
            
                <a href="../effects/json.html">
            
                    
                    JSON
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../effects/http.html">
            
                <a href="../effects/http.html">
            
                    
                    HTTP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../interop/">
            
                <a href="../interop/">
            
                    
                    JavaScriptとの相互運用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../interop/flags.html">
            
                <a href="../interop/flags.html">
            
                    
                    フラグ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../interop/ports.html">
            
                <a href="../interop/ports.html">
            
                    
                    ポート
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../interop/custom_elements.html">
            
                <a href="../interop/custom_elements.html">
            
                    
                    カスタムエレメンツ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../webapps/">
            
                <a href="../webapps/">
            
                    
                    Webアプリケーション
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../webapps/navigation.html">
            
                <a href="../webapps/navigation.html">
            
                    
                    ナビゲーションする
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../webapps/url_parsing.html">
            
                <a href="../webapps/url_parsing.html">
            
                    
                    URLをパースする
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../webapps/modules.html">
            
                <a href="../webapps/modules.html">
            
                    
                    モジュール
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../webapps/structure.html">
            
                <a href="../webapps/structure.html">
            
                    
                    モジュールの構造化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../optimization/">
            
                <a href="../optimization/">
            
                    
                    最適化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../optimization/lazy.html">
            
                <a href="../optimization/lazy.html">
            
                    
                    Html.lazy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../optimization/keyed.html">
            
                <a href="../optimization/keyed.html">
            
                    
                    Html.keyed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../optimization/asset_size.html">
            
                <a href="../optimization/asset_size.html">
            
                    
                    アセットサイズ縮小化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../next_steps.html">
            
                <a href="../next_steps.html">
            
                    
                    次への一歩
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    付録
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="types_as_sets.html">
            
                <a href="types_as_sets.html">
            
                    
                    集合としての型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="types_as_bits.html">
            
                <a href="types_as_bits.html">
            
                    
                    型のビット表現
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11.3" data-path="function_types.html">
            
                <a href="function_types.html">
            
                    
                    関数の型
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../about_translation.html">
            
                <a href="../about_translation.html">
            
                    
                    翻訳について
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            GitBookで公開 
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >関数の型</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="function-types">Function Types</h1>
<p>As you look through packages like <a href="https://package.elm-lang.org/packages/elm/core/latest/" target="_blank"><code>elm/core</code></a> and <a href="https://package.elm-lang.org/packages/elm/html/latest/" target="_blank"><code>elm/html</code></a>, you will definitely see functions with multiple arrows. For example:</p>
<pre><code class="lang-elm"><span class="hljs-type">String</span>.repeat : <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>
<span class="hljs-type">String</span>.join : <span class="hljs-type">String</span> -&gt; <span class="hljs-type">List</span> <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>
</code></pre>
<p>Why so many arrows? What is going on here?!</p>
<h2 id="hidden-parentheses">Hidden Parentheses</h2>
<p>It starts to become clearer when you see all the parentheses. For example, it is also valid to write the type of <code>String.repeat</code> like this:</p>
<pre><code class="lang-elm"><span class="hljs-type">String</span>.repeat : <span class="hljs-type">Int</span> -&gt; (<span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>)
</code></pre>
<p>It is a function that takes an <code>Int</code> and then produces <em>another</em> function. So if we go into <code>elm repl</code> we can see this in action:</p>
<pre><code class="lang-elm">&gt; <span class="hljs-type">String</span>.repeat <span class="hljs-number">4</span>
&lt;function&gt; : <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>

&gt; <span class="hljs-type">String</span>.repeat <span class="hljs-number">4</span> <span class="hljs-string">&quot;ha&quot;</span>
<span class="hljs-string">&quot;hahahaha&quot;</span> : <span class="hljs-type">String</span>

&gt; <span class="hljs-type">String</span>.join <span class="hljs-string">&quot;|&quot;</span>
&lt;function&gt; : <span class="hljs-type">List</span> <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>

&gt; <span class="hljs-type">String</span>.join <span class="hljs-string">&quot;|&quot;</span> [<span class="hljs-string">&quot;red&quot;</span>,<span class="hljs-string">&quot;yellow&quot;</span>,<span class="hljs-string">&quot;green&quot;</span>]
<span class="hljs-string">&quot;red|yellow|green&quot;</span> : <span class="hljs-type">String</span>
</code></pre>
<p>So conceptually, <strong>every function accepts one argument.</strong> It may return another function that accepts one argument. Etc. At some point it will stop returning functions.</p>
<p>We <em>could</em> always put the parentheses to indicate that this is what is really happening, but it starts to get pretty unwieldy when you have multiple arguments. It is the same logic behind writing <code>4 * 2 + 5 * 3</code> instead of <code>(4 * 2) + (5 * 3)</code>. It means there is a bit extra to learn, but it is so common that it is worth it.</p>
<p>Fine, but what is the point of this feature in the first place? Why not do <code>(Int, String) -&gt; String</code> and give all the arguments at once?</p>
<h2 id="partial-application">Partial Application</h2>
<p>It is quite common to use the <code>List.map</code> function in Elm programs:</p>
<pre><code class="lang-elm"><span class="hljs-type">List</span>.map : (a -&gt; b) -&gt; <span class="hljs-type">List</span> a -&gt; <span class="hljs-type">List</span> b
</code></pre>
<p>It takes two arguments: a function and a list. From there it transforms every element in the list with that function. Here are some examples:</p>
<ul>
<li><code>List.map String.reverse [&quot;part&quot;,&quot;are&quot;] == [&quot;trap&quot;,&quot;era&quot;]</code></li>
<li><code>List.map String.length [&quot;part&quot;,&quot;are&quot;] == [4,3]</code></li>
</ul>
<p>Now remember how <code>String.repeat 4</code> had type <code>String -&gt; String</code> on its own? Well, that means we can say:</p>
<ul>
<li><code>List.map (String.repeat 2) [&quot;ha&quot;,&quot;choo&quot;] == [&quot;haha&quot;,&quot;choochoo&quot;]</code></li>
</ul>
<p>The expression <code>(String.repeat 2)</code> is a <code>String -&gt; String</code> function, so we can use it directly. No need to say <code>(\str -&gt; String.repeat 2 str)</code>.</p>
<p>Elm also uses the convention that <strong>the data structure is always the last argument</strong> across the ecosystem. This means that functions are usually designed with this possible usage in mind, making this a pretty common technique.</p>
<p>Now it is important to remember that <strong>this can be overused!</strong> It is convenient and clear sometimes, but I find it is best used in moderation. So I always recommend breaking out top-level helper functions when things get even a <em>little</em> complicated. That way it has a clear name, the arguments are named, and it is easy to test this new helper function. In our example, that means creating:</p>
<pre><code class="lang-elm"><span class="hljs-comment">-- List.map reduplicate [&quot;ha&quot;,&quot;choo&quot;]</span>

<span class="hljs-title">reduplicate</span> : <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>
<span class="hljs-title">reduplicate</span> string =
  <span class="hljs-type">String</span>.repeat <span class="hljs-number">2</span> string
</code></pre>
<p>This case is really simple, but (1) it is now clearer that I am interested in the linguistic phenomenon known as <a href="https://en.wikipedia.org/wiki/Reduplication" target="_blank">reduplication</a> and (2) it will be quite easy to add new logic to <code>reduplicate</code> as my program evolves. Maybe I want <a href="https://en.wikipedia.org/wiki/Shm-reduplication" target="_blank">shm-reduplication</a> support at some point?</p>
<p>In other words, <strong>if your partial application is getting long, make it a helper function.</strong> And if it is multi-line, it should <em>definitely</em> be turned into a top-level helper! This advice applies to using anonymous functions too.</p>
<blockquote>
<p><strong>Note:</strong> If you are ending up with &#x201C;too many&#x201D; functions when you use this advice, I recommend using comments like <code>-- REDUPLICATION</code> to give an overview of the next five or ten functions. Old school! I have shown this with <code>-- UPDATE</code> and <code>-- VIEW</code> comments in previous examples, but it is a generic technique that I use in all my code. And if you are worried about files getting too long with this advice, I recommend watching <a href="https://youtu.be/XpDsk374LDE" target="_blank">The Life of a File</a>!</p>
</blockquote>
<h2 id="pipelines">Pipelines</h2>
<p>Elm also has a <a href="https://package.elm-lang.org/packages/elm/core/latest/Basics#|&gt;" target="_blank">pipe operator</a> that relies on partial application. For example, say we have a <code>sanitize</code> function for turning user input into integers:</p>
<pre><code class="lang-elm"><span class="hljs-comment">-- BEFORE</span>
<span class="hljs-title">sanitize</span> : <span class="hljs-type">String</span> -&gt; <span class="hljs-type">Maybe</span> <span class="hljs-type">Int</span>
<span class="hljs-title">sanitize</span> input =
  <span class="hljs-type">String</span>.toInt (<span class="hljs-type">String</span>.trim input)
</code></pre>
<p>We can rewrite it like this:</p>
<pre><code class="lang-elm"><span class="hljs-comment">-- AFTER</span>
<span class="hljs-title">sanitize</span> : <span class="hljs-type">String</span> -&gt; <span class="hljs-type">Maybe</span> <span class="hljs-type">Int</span>
<span class="hljs-title">sanitize</span> input =
  input
    |&gt; <span class="hljs-type">String</span>.trim
    |&gt; <span class="hljs-type">String</span>.toInt
</code></pre>
<p>So in this &#x201C;pipeline&#x201D; we pass the input to <code>String.trim</code> and then that gets passed along to <code>String.toInt</code>.</p>
<p>This is neat because it allows a &#x201C;left-to-right&#x201D; reading that many people like, but <strong>pipelines can be overused!</strong> When you have three or four steps, the code often gets clearer if you break out a top-level helper function. Now the transformation has a name. The arguments are named. It has a type annotation. It is much more self-documenting that way, and your teammates and your future self will appreciate it! Testing the logic gets easier too.</p>
<blockquote>
<p><strong>Note:</strong> I personally prefer the <code>BEFORE</code>, but perhaps that is just because I learned functional programming in languages without pipes!</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="types_as_bits.html" class="navigation navigation-prev " aria-label="Previous page: 型のビット表現">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../about_translation.html" class="navigation navigation-next " aria-label="Next page: 翻訳について">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"関数の型","level":"1.11.3","depth":2,"next":{"title":"翻訳について","level":"1.12","depth":1,"path":"about_translation.md","ref":"about_translation.md","articles":[]},"previous":{"title":"型のビット表現","level":"1.11.2","depth":2,"path":"appendix/types_as_bits.md","ref":"appendix/types_as_bits.md","articles":[]},"dir":"ltr"},"config":{"plugins":["youtube","bulk-redirect","meta"],"root":"book","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"youtube":{},"meta":{"name":"robots","content":"noindex","data":[]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Evan Czaplicki","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"An Introduction to Elm","language":"ja","gitbook":"*","description":"Learn the basics of Elm. Build applications. Learn functional programming."},"file":{"path":"appendix/function_types.md","mtime":"2018-09-17T01:03:30.962Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-09-17T01:04:30.913Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

